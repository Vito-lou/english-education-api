# 英语教育管理系统 - 后端 API

> 当前版本：v2.0 - 双系统架构设计
> 最后更新：2024 年 12 月 19 日

## 项目简介

英语教育管理系统的后端 API 服务，提供原典法线下教学管理和标准化线上课程分发的数据接口。

## 项目架构

### 前后端分离架构

```
┌─────────────────────────────────────────────────────────┐
│                    前端项目                              │
│            React 18 + TypeScript + Vite                │
│              shadcn/ui + Tailwind CSS                  │
│                   (独立仓库)                            │
├─────────────────────────────────────────────────────────┤
│                    后端 API                             │
│                Laravel 12 + MySQL                      │
│                  (当前项目)                             │
└─────────────────────────────────────────────────────────┘
```

### 相关仓库

-   **前端项目**: `english-education-frontend` (需要创建)
-   **后端项目**: `english-education-backend` (当前项目)
-   **文档**: [产品设计文档](docs/product-versions/README.md)

## 技术栈

### 后端 (当前项目)

-   **框架**: Laravel 12 + MySQL 8.0
-   **认证**: Laravel Sanctum
-   **API**: RESTful API
-   **队列**: Redis + Laravel Queue
-   **存储**: 本地存储 + 阿里云 OSS

### 前端 (独立项目)

-   **框架**: React 18 + TypeScript + Vite
-   **包管理**: pnpm (强制使用)
-   **状态管理**: Zustand + React Query
-   **UI 库**: shadcn/ui + Tailwind CSS
-   **HTTP 客户端**: Axios
-   **图标**: Lucide React + React Icons

## 快速开始

### 后端开发

```bash
# 安装依赖
composer install

# 环境配置
cp .env.example .env
php artisan key:generate

# 数据库迁移
php artisan migrate

# 启动开发服务器
php artisan serve  # 运行在 http://localhost:8000
```

### 前端项目创建

详见：[前端项目配置指南](docs/frontend-setup.md)

## API 文档

### 基础信息

-   **API 基础地址**: `http://localhost:8000/api`
-   **认证方式**: Bearer Token (Laravel Sanctum)
-   **响应格式**: JSON

### 认证接口

```
POST /api/auth/login      # 用户登录
POST /api/auth/register   # 用户注册
POST /api/auth/logout     # 用户登出
GET  /api/user           # 获取当前用户信息
```

### 原典法系统接口

```
GET    /api/offline/students           # 获取学生列表
POST   /api/offline/students           # 创建学生
GET    /api/offline/students/{id}      # 获取学生详情
PUT    /api/offline/students/{id}      # 更新学生信息
DELETE /api/offline/students/{id}      # 删除学生

GET    /api/offline/courses            # 获取课程列表
POST   /api/offline/courses            # 创建课程
GET    /api/offline/lessons            # 获取课时记录
POST   /api/offline/lessons            # 创建课时记录
```

### 线上课程系统接口

```
GET    /api/online/courses             # 获取线上课程
POST   /api/online/orders              # 创建订单
GET    /api/online/distributors        # 获取分销商列表
POST   /api/online/distributors        # 创建分销商
```

## 开发规范

### API 响应格式

```json
// 成功响应
{
  "success": true,
  "message": "操作成功",
  "data": {
    // 具体数据
  }
}

// 错误响应
{
  "success": false,
  "message": "错误信息",
  "errors": {
    "field": ["具体错误信息"]
  }
}
```

### 分页响应格式

```json
{
  "success": true,
  "data": {
    "data": [...],
    "current_page": 1,
    "last_page": 10,
    "per_page": 15,
    "total": 150
  }
}
```

## 开发计划

-   [开发计划详情](TODO.md)
-   [产品设计文档](docs/product-versions/README.md)

## 项目状态

-   ✅ 项目初始化
-   ✅ 产品架构设计
-   ✅ 前端技术栈确定
-   🔄 数据库设计中
-   ⏳ 核心功能开发待开始
-   ⏳ 前端项目创建待开始

## 联系方式

如有问题，请查看 [产品设计文档](docs/product-versions/README.md) 或提交 Issue。

# 原典法教育系统 v2 版本

# 英语教育管理系统

## 产品概述

集成化英语教育管理系统，包含**原典法线下教学管理**和**标准化线上课程分发**两大板块，为独立英语教师提供完整的教学管理和商业化解决方案。

### 核心价值主张

**线下专注原典法精品教学，线上实现标准化课程规模收益，数据统一管理，商业模式互补**

## 双系统架构设计

### 系统定位区分

#### 1. 原典法教育系统（线下板块）

-   **教学理念**: 严格遵循原典法四步骤
    -   听力为先 - 大量可理解性输入
    -   口语跟进 - 模仿与表达练习
    -   阅读理解 - 文本理解与词汇积累
    -   写作表达 - 语言输出与创作
-   **服务模式**: 面对面个性化教学
-   **目标用户**: 本地学生，追求高质量教学效果
-   **核心功能**: 教学管理、进度追踪、家校互动

#### 2. 标准化课程系统（线上板块）

-   **教学理念**: 基于认知科学的标准化学习路径
-   **服务模式**: 自主学习 + 社群辅导
-   **目标用户**: 全国范围学习者，追求便利性和性价比
-   **核心功能**: 课程分发、学习追踪、分销管理

### 技术架构：统一后端，双前端

```
┌─────────────────────────────────────────────────────────┐
│                    统一后端系统                          │
│                 Laravel 12 + MySQL                     │
├─────────────────────────────────────────────────────────┤
│                    统一数据库                           │
│          用户、课程、订单、学习记录（类型区分）            │
├─────────────────────────────────────────────────────────┤
│                    双系统前端                           │
│  ┌─────────────────────┐  ┌─────────────────────┐        │
│  │   原典法教育系统     │  │   线上课程系统       │        │
│  │   (offline.domain)  │  │   (online.domain)   │        │
│  │                     │  │                     │        │
│  │ • 教师管理端         │  │ • 课程学习端         │        │
│  │ • 学员学习端         │  │ • 分销商管理端       │        │
│  │ • 家长监督端         │  │ • 营销推广页面       │        │
│  └─────────────────────┘  └─────────────────────┘        │
└─────────────────────────────────────────────────────────┘
```

## 用户体系设计

### 统一用户表，系统权限分离

```sql
users 表设计：
- role: admin/teacher/offline_student/online_student/parent/distributor
- system_access: JSON字段 {"offline": true, "online": false}
- registration_source: offline/online/referral
```

### 用户角色与系统权限矩阵

| 角色            | 原典法系统  | 线上课程系统  | 说明               |
| --------------- | ----------- | ------------- | ------------------ |
| teacher         | ✅ 全部权限 | ✅ 全部权限   | 你作为系统拥有者   |
| offline_student | ✅ 学习功能 | 🔒 需单独购买 | 线下学员可升级线上 |
| online_student  | ❌ 无权限   | ✅ 学习功能   | 纯线上用户         |
| parent          | ✅ 监督功能 | ✅ 购买功能   | 可同时管理两边     |
| distributor     | ❌ 无权限   | ✅ 分销功能   | 专注线上推广       |

## 产品功能设计

### 原典法教育系统功能

#### 教师端功能

-   **学员档案管理**: 详细的学习档案和能力评估
-   **课程规划**: 基于原典法的个性化课程设计
-   **教学记录**: 每节课的详细教学记录和反思
-   **进度追踪**: 听说读写四维能力发展追踪
-   **家校沟通**: 学习报告和家长沟通记录

#### 学员端功能

-   **课前预习**: 听力材料预先熟悉
-   **课后复习**: 跟读练习和理解巩固
-   **进度查看**: 个人学习轨迹和能力图谱
-   **作业提交**: 口语录音和写作作业

#### 家长端功能

-   **学习监督**: 实时了解孩子学习内容和进度
-   **效果查看**: 阶段性能力提升报告
-   **沟通记录**: 与教师的沟通历史
-   **成就分享**: 孩子的学习成就展示

### 线上课程系统功能

#### 核心课程产品

##### 1. 零基础 3000 词系列

-   **L1 词汇感知**: 动画视频多重复现
-   **L2 短语组合**: 词汇扩展和搭配学习
-   **L3 句型训练**: 问答练习和口语启发
-   **L4 故事串联**: 情节化记忆和理解
-   **L5 场景应用**: 实用对话和表达

##### 2. 分级阅读课程

-   **故事阅读**: 按难度分级的故事内容
-   **科普阅读**: 知识性文章阅读理解
-   **阅读策略**: 阅读技巧和方法指导

##### 3. 语法体系课程

-   **基础语法**: 核心语法规则讲解
-   **语法应用**: 结合词汇的语法练习
-   **语法进阶**: 复杂语法结构掌握

#### 学习端功能

-   **课程学习**: 视频学习 + 互动练习
-   **进度管理**: 学习计划和进度追踪
-   **社群互动**: 学习小组和答疑
-   **成就系统**: 学习激励和成就展示

#### 分销端功能

-   **推广工具**: 海报生成和分享链接
-   **销售管理**: 订单跟踪和佣金结算
-   **团队管理**: 下级分销商管理
-   **培训资料**: 产品培训和销售技巧

## 数据设计原则

### 1. 统一存储，类型区分

```sql
courses 表：
- system_type: 'offline'/'online' 区分系统
- teaching_method: 'yuandian'/'standard' 区分教学法

learning_records 表：
- system_type: 'offline'/'online'
- lesson_type: 'face_to_face'/'video'/'practice'
```

### 2. 用户关系打通

-   同一用户可以在两个系统间切换
-   家长可以统一管理孩子在两个系统的学习
-   学习数据可以互相参考但不混合

### 3. 商业数据分离

-   线下按课时收费，线上按课程包收费
-   分销数据只属于线上系统
-   财务报表按系统分别统计

## 商业模式

### 线下：原典法精品教学

-   **定位**: 高端个性化教学服务
-   **收费**: 按课时收费，价格较高
-   **优势**: 教学效果显著，口碑传播
-   **规模**: 受地域和时间限制

### 线上：标准化课程分发

-   **定位**: 普惠性英语学习产品
-   **收费**: 课程包 + 分销体系
-   **优势**: 可规模化，边际成本低
-   **规模**: 全国市场，无地域限制

### 两者协同效应

1. **线下验证线上**: 原典法教学效果为线上课程提供权威背书
2. **线上扩大影响**: 线上用户了解原典法理念，提升线下品牌
3. **用户互相转化**: 线下学员购买线上补充，线上用户转线下深度学习
4. **数据相互支撑**: 线下个性化数据指导线上产品优化

## 发展规划

### 第一阶段（3-6 个月）：原典法系统

-   完成线下教学管理功能
-   验证数据架构的扩展性
-   积累教学数据和用户反馈

### 第二阶段（6-12 个月）：线上系统开发

-   开发线上课程学习平台
-   制作第一批标准化课程内容
-   建立分销合作机制

### 第三阶段（1-2 年）：双系统协同

-   完善两个系统的数据打通
-   优化用户在两系统间的体验
-   建立全国性的业务网络

## 核心优势

1. **教学专业性** - 线下原典法的深度和线上标准化的广度
2. **商业模式互补** - 高价值服务 + 规模化产品
3. **品牌差异化** - 原典法权威性为线上产品背书
4. **技术架构统一** - 一套系统支撑两种业务模式
5. **用户价值最大化** - 不同需求用户都能找到合适的服务
