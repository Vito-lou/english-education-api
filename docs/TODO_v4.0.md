# 英语教育系统 v4.0 开发计划

## 🎯 v4.0 版本目标

构建完整的教培机构报名管理系统，支持从潜在学员到正式学员的全流程管理，包括报名、缴费、分班、上课记录等完整业务链条。

## 📊 当前状态 (2025-08-14)

### ✅ 已完成设计
- [x] 完整业务流程设计文档 (`docs/product-versions/v4.0-complete-enrollment-system.md`)
- [x] 数据库表结构设计
- [x] 开发计划制定
- [x] 核心数据表迁移文件创建

### ✅ 已完成基础功能 (v2.0)
- [x] 学员管理系统 (基础信息、状态跟踪)
- [x] 班级管理系统 (班级信息、学员管理)
- [x] 课程管理系统 (课程体系、内容管理)
- [x] 班级学员管理 (添加/移出/转班)

## 🚀 v4.0 核心功能模块

### 1. 学员报名管理系统
- [ ] 报名申请流程
- [ ] 费用计算和优惠策略
- [ ] 订单生成和管理
- [ ] 合同签署管理
- [ ] 报名状态流转

### 2. 财务管理系统
- [ ] 收费记录管理
- [ ] 分期付款支持
- [ ] 退费处理流程
- [ ] 财务报表生成
- [ ] 收支统计分析

### 3. 教学记录系统
- [ ] 课时记录管理
- [ ] 课时自动消耗计算
- [ ] 学习进度跟踪
- [ ] 教学质量评估
- [ ] 补课记录管理

### 4. 作业管理系统
- [ ] 作业布置和管理
- [ ] 作业提交和批改
- [ ] 学习反馈系统
- [ ] 家长作业查看
- [ ] 作业统计分析

## 🗄️ 数据库表结构

### 已创建迁移文件
- [x] `student_enrollments` - 学员报名表
- [x] `enrollment_orders` - 报名订单表
- [x] `enrollment_order_items` - 订单明细表
- [x] `lesson_records` - 课时记录表
- [x] `payment_records` - 收费记录表

### 待创建表
- [ ] `homework_assignments` - 作业管理表
- [ ] `refund_records` - 退费记录表
- [ ] `student_progress` - 学习进度表
- [ ] `class_schedules` - 班级课表表

## 📋 开发阶段规划

### 阶段1：数据库基础建设 (1-2周)
- [x] 创建报名管理相关数据表
- [x] 创建教学记录相关数据表  
- [x] 创建财务管理相关数据表
- [ ] 完善数据表关系和约束
- [ ] 创建基础数据种子文件
- [ ] 运行数据库迁移

### 阶段2：核心API开发 (2-3周)
- [ ] 学员报名API (报名申请、费用计算、订单生成)
- [ ] 课时记录API (上课记录、考勤管理、课时消耗)
- [ ] 作业管理API (作业布置、提交、批改)
- [ ] 财务管理API (收费记录、退费处理)

### 阶段3：业务逻辑完善 (1-2周)
- [ ] 学员状态自动流转
- [ ] 课时自动消耗计算
- [ ] 财务数据统计分析
- [ ] 报表生成功能

### 阶段4：前端界面开发 (3-4周)
- [ ] 学员报名管理界面
- [ ] 课时记录管理界面
- [ ] 作业管理界面
- [ ] 财务管理界面
- [ ] 数据统计报表界面

## 🔧 当前阶段临时方案

在完整系统开发完成前，采用以下临时方案：

### 1. 手动数据管理
```sql
-- 示例：手动插入学员报名记录
INSERT INTO student_enrollments (
    student_id, institution_id, campus_id, course_id, level_id,
    enrollment_date, total_lessons, enrollment_fee, status
) VALUES (
    1, 1, 1, 1, 1, '2025-08-14', 48, 4800.00, 'active'
);

-- 示例：生成报名订单
INSERT INTO enrollment_orders (
    order_number, enrollment_id, student_id, institution_id,
    order_date, total_amount, final_amount, payment_status, created_by
) VALUES (
    'ORD20250814001', 1, 1, 1, '2025-08-14', 4800.00, 4800.00, 'paid', 1
);
```

### 2. 修改现有功能
- [x] 班级学员添加：只允许已报名学员 (`student_enrollments.status = 'active'`)
- [ ] 课时消耗记录：手动插入上课记录，自动更新已用课时数
- [ ] 学员状态同步：报名成功后自动更新学员类型为"正式学员"

### 3. API接口调整
- [ ] 修改学员列表API：支持按报名状态筛选
- [ ] 修改班级学员API：关联报名记录显示课时信息
- [ ] 添加报名记录API：基础的CRUD操作

## 📅 开发时间线

### 2025年8月下旬
- [x] 完成v4.0系统设计 (2025-08-14)
- [ ] 完善数据库表结构
- [ ] 修改现有班级学员管理逻辑

### 2025年9月
- [ ] 开发报名管理核心API
- [ ] 开发课时记录系统
- [ ] 临时方案完善和测试

### 2025年10月+
- [ ] 根据业务需求决定是否开发完整前端界面
- [ ] 财务管理系统开发
- [ ] 作业管理系统开发

## 🎯 业务价值

### 对机构的价值
1. **完整业务流程**：从获客到教学的全流程管理
2. **财务透明化**：清晰的收费、退费记录
3. **教学标准化**：统一的课时记录和进度跟踪
4. **数据驱动决策**：完整的业务数据分析

### 对家长的价值
1. **透明消费**：清楚的课时消耗和剩余情况
2. **学习跟踪**：详细的学习进度和作业反馈
3. **便捷查询**：随时查看孩子的学习情况

### 对教师的价值
1. **教学记录**：完整的上课记录和学员表现
2. **作业管理**：便捷的作业布置和批改
3. **进度跟踪**：清晰的教学进度管理

## 📝 注意事项

1. **数据一致性**：确保报名、班级、课时数据的一致性
2. **权限控制**：严格的财务数据访问权限
3. **业务流程**：遵循教培机构的标准业务流程
4. **扩展性**：为未来功能扩展预留空间
5. **用户体验**：界面友好，操作简便

## 🔗 相关文档

- [v4.0完整系统设计文档](./product-versions/v4.0-complete-enrollment-system.md)
- [数据库设计文档](./DATABASE_DESIGN.md)
- [API接口文档](./api_structure.md)
- [当前开发计划](./TODO_v2.0.md)
