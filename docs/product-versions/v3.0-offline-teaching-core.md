# 英语教育管理系统 v3.0 - 线下教学核心业务

> 设计时间：2025 年 8 月
> 业务目标：解决线下培训班核心教学管理和家长服务需求
> 优先级：P0 - 本月核心业务目标

## 产品概述

基于已有的权限管理系统，专注解决线下英语培训班的核心业务痛点：课程大纲管理、教学内容管理、学习跟踪、家长服务和教学效果统计。

### 核心价值主张

**让老师专注教学，让家长放心监督，让学生持续进步，让机构有数据支撑**

## 业务背景与痛点

### 当前痛点

1. **课程内容管理混乱** - 缺乏系统化的课程大纲和内容管理
2. **家长信息不透明** - 家长不知道孩子学了什么、练了什么、会了什么
3. **学习效果难跟踪** - 缺乏学习时长、练习成绩等数据统计
4. **教学效果难评估** - 老师无法便捷查看班级整体学习情况
5. **考勤管理手工化** - 缺乏系统化的考勤记录

### 目标用户

-   **主要用户**: 线下报名培训班的学生家长
-   **管理用户**: 培训机构老师和管理员
-   **受益用户**: 培训班学生

## 功能需求详述

### 1. 课程大纲管理系统

#### 1.1 级别体系管理

```
级别结构：Pre-A → A → B → C → D → E
当前状态：Pre-A、A级别有内容，其他级别待补充
```

**功能要求：**

-   支持 6 个级别的课程大纲管理
-   每个级别包含多个课程单元
-   每个课程单元包含多节课
-   支持课程内容的增删改查

#### 1.2 课程内容管理

**数据结构：**

```
级别 (Level)
├── 课程单元 (Course Unit)
    ├── 课程信息 (基础信息、学习目标)
    └── 课时 (Lessons)
        ├── 课时内容 (教学内容)
        ├── 课后作业 (Homework)
        ├── 课堂笔记 (Class Notes)
        └── 课后练习 (Practice Exercises)
```

**管理功能：**

-   课程基础信息编辑（名称、描述、学习目标）
-   课时内容管理（支持富文本编辑）
-   文件上传管理（Word、PDF 文档）
-   内容版本控制

### 2. 教学内容管理

#### 2.1 课后作业管理

-   作业内容发布（文字、图片、文档）
-   作业提交收集
-   作业批改和反馈
-   作业完成统计

#### 2.2 课堂笔记管理

-   重点知识记录（连读、语法规则、短语等）
-   难点解析说明
-   文档上传（Word、PDF）
-   笔记分享给家长

#### 2.3 课后练习系统

-   练习题库管理（单词、短语、句型、语法）
-   在线练习功能（类似小考试）
-   自动评分系统
-   错题重练机制
-   练习记录统计

### 3. 学习跟踪与统计

#### 3.1 学习数据收集

-   学习时长统计（练习时间、笔记查看时间）
-   练习成绩记录（正确率、完成度）
-   作业提交情况
-   课堂出勤记录

#### 3.2 进步分析

-   学习轨迹可视化
-   成绩趋势分析
-   学习习惯分析（哪天没学习）
-   知识点掌握度分析

### 4. 家长服务系统 (H5 端)

#### 4.1 学习概览

-   当前级别课程展示
-   学习进度可视化
-   最新作业和笔记
-   学习统计概览

#### 4.2 详细内容查看

-   课程大纲浏览
-   课堂笔记下载
-   作业查看和辅导
-   练习结果查看

#### 4.3 统计报告

-   学习时长统计图表
-   练习成绩趋势图
-   出勤情况统计
-   进步/退步分析
-   朋友圈分享功能

### 5. 考勤管理系统

#### 5.1 课程安排

-   固定课程时间设置（如：周六 2:00-3:30 A 级别，3:50-5:20 Pre-A 级别）
-   课程日历管理
-   节假日调课管理

#### 5.2 考勤记录

-   学生签到/签退
-   请假管理
-   迟到早退记录
-   考勤统计报表

### 6. 教师管理后台

#### 6.1 班级管理

-   班级学生列表
-   学生学习情况概览
-   批量操作功能

#### 6.2 教学统计

-   班级整体学习统计
-   学生个人学习报告
-   教学效果分析
-   课程完成度统计

## 技术实现方案

### 数据库设计要点

#### 基于竞品分析的优化设计

**设计原则**：参考竞品的优秀设计，采用职责分离的表结构设计

#### 核心表结构

##### 1. 课程体系表（支持多科目扩展）

```sql
-- 科目表（支持未来多科目扩展）
subjects (
    id, name, code, description,
    institution_id, sort_order, status, created_at, updated_at
)

-- 课程表（一个科目下多个课程）
courses (
    id, subject_id, name, code, description,
    teaching_method,  -- 'yuandian', 'standard', 'speed_memory'
    has_levels,       -- 是否有级别体系
    institution_id, sort_order, status, created_at, updated_at
)

-- 课程级别表（可选，灵活支持）
course_levels (
    id, course_id, name, code, description,
    sort_order, status, created_at, updated_at
)

-- 课程单元表（支持有级别和无级别两种模式）
course_units (
    id, course_id, level_id, -- level_id可为null
    name, description, learning_objectives,
    sort_order, status, created_at, updated_at
)

-- 课时表
lessons (
    id, unit_id, name, content, duration,
    sort_order, status, created_at, updated_at
)
```

##### 2. 用户体系表（职责分离设计）

```sql
-- 用户表：专注登录和基础账号信息
users (
    id, name, email, phone, password,
    user_type,        -- 'admin', 'teacher', 'parent'
    teacher_id,       -- 如果是老师，关联teachers表
    institution_id,   -- 所属机构
    status,           -- 'active', 'inactive'
    last_login_at, created_at, updated_at, deleted_at
)

-- 教师表：专注教师业务信息
teachers (
    id, name, phone, email, gender, birth_date,
    id_card, avatar, bio,
    qualifications,   -- 资质证书(JSON)
    specialties,      -- 擅长科目(JSON)
    hourly_rate,      -- 课时费
    employment_type,  -- 雇佣类型
    hire_date,        -- 入职日期
    institution_id, department_id,
    status, created_at, updated_at, deleted_at
)

-- 学员表：专注学员业务信息
students (
    id, name, phone, gender, birth_date,
    parent_phone, parent_name,
    student_type,     -- 'potential', 'trial', 'enrolled', 'graduated'
    follow_up_status, -- 跟进状态
    intention_level,  -- 意向等级
    user_id,          -- 关联用户账号（可为null）
    institution_id, source, remarks,
    status, created_at, updated_at, deleted_at
)

-- 用户学员关联：支持一个家长管理多个孩子
user_students (
    user_id, student_id,
    relationship,     -- 'parent', 'guardian'
    created_at
)
```

##### 3. 教学业务表

```sql
-- 课后作业表
homework (
    id, lesson_id, title, content, due_date,
    created_by, status, created_at, updated_at
)

-- 课堂笔记表
class_notes (
    id, lesson_id, title, content, attachments,
    created_by, created_at, updated_at
)

-- 练习题表
practice_questions (
    id, lesson_id, question_type, content,
    options, correct_answer, difficulty_level,
    created_at, updated_at
)

-- 学习记录表
learning_records (
    id, student_id, lesson_id, record_type,
    duration, score, metadata, created_at
)

-- 考勤记录表
attendance_records (
    id, student_id, class_schedule_id, status,
    check_in_time, check_out_time, created_at
)
```

### API 设计原则

-   RESTful API 设计
-   统一响应格式
-   权限中间件保护
-   数据分页和筛选
-   文件上传处理

### 前端架构

-   **管理后台**: 继续使用现有 React + TypeScript
-   **H5 家长端**: 响应式设计，支持微信内浏览
-   **组件复用**: 统计图表、文件上传等通用组件

## 开发优先级

### P0 - 核心功能 (本月必须完成)

1. 课程大纲管理系统
2. 课时内容管理
3. 基础学习记录
4. 家长 H5 端查看功能
5. 简单统计功能

### P1 - 重要功能 (下月完成)

1. 课后练习系统
2. 详细统计分析
3. 考勤管理系统
4. 文件上传下载

### P2 - 优化功能 (后续迭代)

1. 朋友圈分享优化
2. 高级统计分析
3. 移动端优化
4. 性能优化

## 成功指标

### 业务指标

-   家长满意度提升（通过课程透明度）
-   学生学习时长增加
-   练习完成率提升
-   教学效果可量化

### 技术指标

-   系统响应时间 < 2 秒
-   H5 端加载速度 < 3 秒
-   数据准确性 99.9%
-   系统可用性 99.5%

## 风险与挑战

### 技术风险

-   H5 端兼容性问题
-   大量学习数据的存储和查询性能
-   文件上传下载的稳定性

### 业务风险

-   老师使用习惯改变的阻力
-   家长对新功能的接受度
-   数据录入的工作量增加

### 解决方案

-   渐进式功能发布
-   充分的用户培训
-   简化操作流程
-   提供数据导入工具

## 统计维度建议

### 学生个人统计维度

1. **学习时长统计**

    - 日/周/月学习时长
    - 平均每日学习时长
    - 连续学习天数
    - 学习时间分布（上午/下午/晚上）

2. **练习成绩统计**

    - 总体正确率趋势
    - 各知识点掌握度（单词/语法/句型/短语）
    - 错题重练改进率
    - 练习完成度统计

3. **学习行为统计**

    - 作业提交及时率
    - 课堂笔记查看频次
    - 练习主动性（主动练习 vs 被动完成）
    - 学习习惯分析（固定时间学习 vs 随机学习）

4. **进步轨迹统计**
    - 成绩提升曲线
    - 知识点突破记录
    - 学习里程碑达成
    - 阶段性进步对比

### 班级整体统计维度

1. **班级学习概况**

    - 班级平均学习时长
    - 班级平均成绩
    - 学习活跃度排名
    - 作业完成率统计

2. **教学效果分析**

    - 课程完成进度
    - 知识点掌握度分布
    - 学生成绩分布图
    - 教学目标达成率

3. **考勤情况统计**

    - 出勤率统计
    - 请假原因分析
    - 迟到早退情况
    - 考勤趋势分析

4. **家长参与度统计**
    - H5 端访问频次
    - 笔记下载次数
    - 练习监督参与度
    - 家长反馈统计

### 机构运营统计维度

1. **课程运营数据**

    - 各级别课程受欢迎度
    - 课程完成率对比
    - 教学资源使用情况
    - 课程内容更新频次

2. **学生留存分析**
    - 学习活跃度与续费关系
    - 成绩提升与满意度关系
    - 家长参与度与续费关系
    - 流失学生特征分析

## 实施计划

### 第一周：数据库设计与基础架构

#### 数据库重构（渐进式）

-   [ ] **新增表结构**：

    -   [ ] 创建 `subjects` 表（科目管理）
    -   [ ] 创建 `courses` 表（课程管理）
    -   [ ] 创建 `teachers` 表（教师业务信息）
    -   [ ] 创建 `students` 表（学员业务信息）
    -   [ ] 创建 `user_students` 表（用户学员关联）

-   [ ] **课程体系表**：

    -   [ ] 创建 `course_levels` 表（课程级别）
    -   [ ] 创建 `course_units` 表（课程单元）
    -   [ ] 创建 `lessons` 表（课时）

-   [ ] **教学业务表**：
    -   [ ] 创建 `homework` 表（课后作业）
    -   [ ] 创建 `class_notes` 表（课堂笔记）
    -   [ ] 创建 `practice_questions` 表（练习题）
    -   [ ] 创建 `learning_records` 表（学习记录）
    -   [ ] 创建 `attendance_records` 表（考勤记录）

#### 基础架构

-   [ ] 建立模型关系和验证规则
-   [ ] 设计 API 接口规范
-   [ ] 创建基础 Seeder 数据

### 第二周：课程管理系统开发

-   [ ] 课程级别管理功能
-   [ ] 课程单元 CRUD 操作
-   [ ] 课时内容管理
-   [ ] 文件上传功能

### 第三周：学习记录与统计系统

-   [ ] 学习记录数据收集
-   [ ] 基础统计功能开发
-   [ ] 图表展示组件
-   [ ] 数据导出功能

### 第四周：H5 家长端开发

-   [ ] 家长端页面设计
-   [ ] 学习概览功能
-   [ ] 统计报告展示
-   [ ] 朋友圈分享功能

### 第五周：考勤与练习系统

-   [ ] 考勤管理功能
-   [ ] 课后练习系统
-   [ ] 作业管理功能
-   [ ] 课堂笔记管理

### 第六周：测试与优化

-   [ ] 功能测试
-   [ ] 性能优化
-   [ ] 用户体验优化
-   [ ] 部署上线

## 关键成功因素

### 用户体验

-   **简单易用**: 老师操作简单，家长查看方便
-   **数据可视化**: 统计图表直观美观
-   **响应速度**: 快速加载，流畅操作
-   **移动友好**: H5 端适配各种设备

### 数据质量

-   **准确性**: 学习时长、成绩记录准确
-   **完整性**: 覆盖学习全过程数据
-   **实时性**: 数据及时更新
-   **一致性**: 各端数据保持一致

### 业务价值

-   **提升教学效果**: 通过数据指导教学
-   **增强家长信任**: 透明化学习过程
-   **促进学生进步**: 激励持续学习
-   **支撑运营决策**: 数据驱动业务优化

## 后续扩展方向

### 短期扩展（3 个月内）

-   智能学习建议系统
-   家长沟通工具
-   学习报告自动生成
-   多媒体内容支持

### 中期扩展（6 个月内）

-   AI 学习分析
-   个性化练习推荐
-   家校互动平台
-   学习游戏化元素

### 长期扩展（1 年内）

-   线上线下融合教学
-   大数据学习分析
-   智能教学助手
-   教育生态平台

## 数据库重构详细计划

### 现有 users 表问题分析

#### 当前 users 表冗余字段

```sql
-- 需要清理的字段
employee_id,          -- 删除，未使用
can_teach,           -- 迁移到teachers表
hourly_rate,         -- 迁移到teachers表
qualifications,      -- 迁移到teachers表
specialties,         -- 迁移到teachers表
bio,                 -- 迁移到teachers表
avatar,              -- 迁移到teachers表
gender,              -- 迁移到teachers表
birth_date,          -- 迁移到teachers表
id_card,             -- 迁移到teachers表
employment_type,     -- 迁移到teachers表
hire_date,           -- 迁移到teachers表
department_id        -- 迁移到teachers表
```

### 重构实施步骤

#### 阶段 1：新表创建（第 1 周）

1. **创建新表结构**

    - 创建 teachers 表，包含所有教师业务字段
    - 创建 students 表，包含所有学员业务字段
    - 创建 user_students 关联表

2. **数据迁移脚本**
    ```php
    // 迁移现有教师数据到teachers表
    // 保持users表中的teacher_id关联
    // 清理users表中的冗余字段
    ```

#### 阶段 2：业务逻辑调整（第 2-3 周）

1. **模型关系调整**

    - User 模型：只保留登录相关字段
    - Teacher 模型：包含所有教师业务逻辑
    - Student 模型：包含所有学员业务逻辑

2. **API 接口调整**
    - 教师相关接口使用 Teacher 模型
    - 学员相关接口使用 Student 模型
    - 保持向后兼容性

#### 阶段 3：数据清理（第 4 周后）

1. **清理 users 表冗余字段**

    ```sql
    ALTER TABLE users
    DROP COLUMN employee_id,
    DROP COLUMN can_teach,
    DROP COLUMN hourly_rate;
    -- ... 其他冗余字段
    ```

2. **优化表结构**
    - 添加必要的索引
    - 优化字段类型
    - 添加约束条件

### 重构收益

1. **职责清晰**：每个表专注自己的业务领域
2. **扩展性强**：便于添加教师和学员的专属字段
3. **性能优化**：减少 users 表的字段数量，提升查询性能
4. **维护性好**：业务逻辑更清晰，便于后续维护
5. **兼容性强**：支持潜在学员、多子女家庭等复杂场景

### 风险控制

1. **数据备份**：重构前完整备份现有数据
2. **渐进式迁移**：分阶段进行，确保系统稳定
3. **回滚方案**：准备数据回滚脚本
4. **充分测试**：每个阶段都要进行完整测试
